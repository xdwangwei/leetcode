package com.offerassult;

import java.util.*;

/**
 * @author wangwei
 * @date 2022/12/11 9:55
 * @description: _057_BothValueAndIndexDifferenceWithGivenRange
 *
 * å‰‘æŒ‡ Offer II 057. å€¼å’Œä¸‹æ ‡ä¹‹å·®éƒ½åœ¨ç»™å®šçš„èŒƒå›´å†…
 * ç»™ä½ ä¸€ä¸ªæ•´æ•°æ•°ç»„ nums å’Œä¸¤ä¸ªæ•´æ•° k å’Œ t ã€‚è¯·ä½ åˆ¤æ–­æ˜¯å¦å­˜åœ¨ ä¸¤ä¸ªä¸åŒä¸‹æ ‡ i å’Œ jï¼Œä½¿å¾— abs(nums[i] - nums[j]) <= t ï¼ŒåŒæ—¶åˆæ»¡è¶³ abs(i - j) <= k ã€‚
 *
 * å¦‚æœå­˜åœ¨åˆ™è¿”å› trueï¼Œä¸å­˜åœ¨è¿”å› falseã€‚
 *
 *
 *
 * ç¤ºä¾‹ 1ï¼š
 *
 * è¾“å…¥ï¼šnums = [1,2,3,1], k = 3, t = 0
 * è¾“å‡ºï¼štrue
 * ç¤ºä¾‹ 2ï¼š
 *
 * è¾“å…¥ï¼šnums = [1,0,1,1], k = 1, t = 2
 * è¾“å‡ºï¼štrue
 * ç¤ºä¾‹ 3ï¼š
 *
 * è¾“å…¥ï¼šnums = [1,5,9,1,5,9], k = 2, t = 3
 * è¾“å‡ºï¼šfalse
 *
 *
 * æç¤ºï¼š
 *
 * 0 <= nums.length <= 2 * 104
 * -231 <= nums[i] <= 231 - 1
 * 0 <= k <= 104
 * 0 <= t <= 231 - 1
 *
 *
 * æ³¨æ„ï¼šæœ¬é¢˜ä¸ä¸»ç«™ 220 é¢˜ç›¸åŒï¼š https://leetcode-cn.com/problems/contains-duplicate-iii/
 *
 * é€šè¿‡æ¬¡æ•°15,894æäº¤æ¬¡æ•°45,179
 */
public class _057_BothValueAndIndexDifferenceWithGivenRange {

    /**
     * æ–¹æ³•ä¸€æš´åŠ›æœç´¢ï¼š1499msï¼Œæœ‰æ—¶å€™è¿‡æœ‰æ—¶å€™ä¸è¿‡
     * å¯¹äºnums[i]ï¼Œä¸åœ¨ nums[i-k, i+k] èŒƒå›´å†…çš„å…ƒç´  num[j] è¿›è¡Œæ¯”è¾ƒï¼Œå¦‚æœ å€¼å·®çš„ç»å¯¹å€¼ <= kï¼Œè¿”å› true
     * æ³¨æ„ä¸‹æ ‡ä¸è¦è¶Šç•Œ
     * æ³¨æ„ j ä¸èƒ½ ç­‰äº i
     * æ³¨æ„æ•°æ®è½¬longæ”¾ç½®intæº¢å‡º
     * @param nums
     * @param k
     * @param t
     * @return
     */
    public boolean containsNearbyAlmostDuplicate(int[] nums, int k, int t) {
        int n = nums.length;
        // å¯¹äºæ¯ä¸ªnums[i]
        for (int i = 0; i < n; i++) {
            // å…ˆæ»¡è¶³ä¸‹æ ‡å·®çº¦æŸã€‚åœ¨ nums[i-k, i+k] èŒƒå›´å†…çš„å…ƒç´  num[j] è¿›è¡Œæ¯”è¾ƒï¼Œ
            for (int j = Math.max(0, i - k); j != i && j < Math.min(n, i + k + 1); ++j) {
                // å†æ»¡è¶³å€¼çš„çº¦æŸï¼Œå¦‚æœ å€¼å·®çš„ç»å¯¹å€¼ <= kï¼Œè¿”å› true
                if (Math.abs((long)nums[i] - nums[j]) <= t) {
                    return true;
                }
            }
        }
        // é»˜è®¤ï¼Œè¿”å›false
        return false;
    }

    /**
     * æš´åŠ›æœç´¢æ”¹è¿› ï¼Œå‡»è´¥ 96%
     * æ–¹æ³•ä¸€å¤§å¤šæ•°æƒ…å†µä¸‹ä¼šè¶…æ—¶ï¼Œæ˜¯å› ä¸ºæ¯ä¸ªå…ƒç´ éƒ½è¦è€ƒè™‘ [i-k, i+k] èŒƒå›´å†…å…ƒç´ 
     * è€ƒè™‘é€šè¿‡æ’åºæ¥å®ç°åªå¯¹ä¸€åŠèŒƒå›´[i+1,i+k]è¿›è¡Œæœç´¢
     * å°†åŸæ•°ç»„å…ƒç´  nums[i] åŒ…è£…æˆ <nums[i], i> å³ (å€¼ï¼Œç´¢å¼•) å½¢å¼çš„é”®å€¼å¯¹ï¼Œå†æŒ‰ç…§ å€¼ è¿›è¡Œæ’åº
     * é‚£ä¹ˆ å¯¹äº æ–°çš„å…ƒç´  item[i]ï¼Œåªéœ€è¦å‘åéå†ï¼Œé‡åˆ° item[j][0] - item[i][0] > t æ—¶é€€å‡ºå³å¯
     *      å¯¹äº item[j][0] - nums[i][0] <= t æ—¶ï¼Œåˆ¤æ–­ abs(item[j][1] - item[i][1] <= k) å³å¯
     * @param nums
     * @param k
     * @param t
     * @return
     */
    public boolean containsNearbyAlmostDuplicate2(int[] nums, int k, int t) {
        List<int[]> list = new ArrayList<>();
        // åŒ…è£…åŸæ•°ç»„å…ƒç´ ä¸º(å€¼ï¼Œç´¢å¼•) å½¢å¼çš„é”®å€¼å¯¹ï¼Œç”¨ int[2] å®ç°
        for (int i = 0; i < nums.length; i++) {
            list.add(new int[]{nums[i], i});
        }
        // æŒ‰ç…§å€¼æ’åº
        list.sort(Comparator.comparingInt(o -> o[0]));
        // å¯¹äº æ–°çš„å…ƒç´  item[i]ï¼Œåªéœ€è¦å‘åéå†ï¼Œ
        for (int i = 0; i < list.size(); i++) {
            for (int j = i + 1; j < list.size(); ++j) {
                // é‡åˆ° item[j][0] - item[i][0] > t æ—¶ä¸ç”¨ç»§ç»­éå†
                if ((long)list.get(j)[0] - list.get(i)[0] > t) {
                    break;
                }
                // å½“item[j][0] - nums[i][0] <= t æ—¶ï¼Œåˆ¤æ–­ abs(item[j][1] - item[i][1] <= k)
                if (Math.abs(list.get(j)[1] - list.get(i)[1]) <= k) {
                    return true;
                }
            }
        }
        // é»˜è®¤è¿”å›false
        return false;
    }


    /**
     * æ–¹æ³•ä¸‰ï¼šæ»‘åŠ¨çª—å£ + æœ‰åºå“ˆå¸Œè¡¨
     * åœ¨æ–¹æ³•äºŒä¸­ï¼Œä¸ºäº†å°†æ¯ä¸ªå…ƒç´ çš„æ‰«æåŒºé—´ä»[i-k,i+k] ç¼©å‡ä¸º [i+1,k]ï¼Œæˆ‘ä»¬å€ŸåŠ©äº†æ’åº
     * å®é™…ä¸Šï¼Œæˆ‘ä»¬ä¸éœ€è¦è¿™ä¸ªè¿‡ç¨‹
     * æ¯ä¸ªå…ƒç´ nums[i] åªéœ€è¦æ‰«æ [i-k, i) è¿™ä¸ªåŒºé—´å³å¯ã€‚
     * å› ä¸º i å‘å‰æœç´¢ [i+1, i+k] å’Œ [i+1, i+k] åŒºé—´å†…çš„å…ƒç´ jå‘åæ‰«æ [j-k, j) æ˜¯ç­‰ä»·çš„
     *
     * å› æ­¤ï¼Œnums[i] åªéœ€è¦ æ‰«æ [i-k, i) èŒƒå›´å†…æ˜¯å¦å­˜åœ¨å…ƒç´  abs(nums[?] - nums[i]) <= t
     * è¦åˆ¤æ–­è¿™ä¸ªæ¡ä»¶æ˜¯å¦æˆç«‹ï¼Œæˆ‘ä»¬ä¸éœ€è¦ç”¨æ‰€æœ‰å…ƒç´ å’Œnums[i]è¿›è¡Œæ¯”è¾ƒï¼Œåªéœ€è¦æ‰¾åˆ°åŒºé—´å†…æœ€æ¥è¿‘xçš„ä¸¤ä¸ªå…ƒç´ å³å¯ã€‚
     * ä¹Ÿå°±æ˜¯ ceiling(x) å’Œ floor(x) ï¼Œåªè¦äºŒè€…æœ‰å…¶ä¸€æ»¡è¶³åˆ¤æ–­æ¡ä»¶ï¼Œæˆ‘ä»¬å°±å¯è¿”å›trueï¼Œå¦åˆ™ï¼ŒåŒºé—´å†…å…¶ä»–å…ƒç´ éƒ½æ— æ³•æ»¡è¶³æ¡ä»¶
     *
     * å› æ­¤ï¼Œä½¿ç”¨ treeSet å­˜å‚¨ å¤§å°ä¸º k çš„çª—å£å†…çš„å…ƒç´ ï¼›
     * å½“ nums[i] çš„æ‰«æç»“æŸæ—¶ï¼Œå°† nums[i] åŠ å…¥ çª—å£ï¼›å¦‚æœ i >= kï¼Œæ­¤æ—¶éœ€è¦ä»çª—å£å†…ç§»é™¤ nums[i-k]
     *
     * æ—¶é—´å¤æ‚åº¦ï¼šTreeSet åŸºäºçº¢é»‘æ ‘ï¼ŒæŸ¥æ‰¾å’Œæ’å…¥éƒ½æ˜¯ O(logk) å¤æ‚åº¦ã€‚æ•´ä½“å¤æ‚åº¦ä¸ºO(nlogk)
     * ç©ºé—´å¤æ‚åº¦ï¼šO(k)
     *
     * ä½œè€…ï¼šAC_OIer
     * é“¾æ¥ï¼šhttps://leetcode.cn/problems/contains-duplicate-iii/solution/gong-shui-san-xie-yi-ti-shuang-jie-hua-d-dlnv/
     * æ¥æºï¼šåŠ›æ‰£ï¼ˆLeetCodeï¼‰
     * è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…è·å¾—æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚
     * @param nums
     * @param k
     * @param t
     * @return
     */
    public boolean containsNearbyAlmostDuplicate3(int[] nums, int k, int t) {
        int n = nums.length;
        // ç»´æŠ¤å¤§å°ä¸ºkçš„çª—å£ï¼Œå¯¹äº nums[i] ç»´æŠ¤çš„æ˜¯ nums[i-k, i) çš„å€¼
        TreeSet<Integer> window = new TreeSet<>();
        // éå†nums[i]
        for (int i = 0; i < n; ++i) {
            // åœ¨nums[i-k, i)å†…æ‰¾åˆ°æœ€æ¥è¿‘xçš„ä¸¤ä¸ªå€¼ï¼Œfloorå’Œceiling
            Integer floor = window.floor(nums[i]);
            // åªè¦æœ‰ä¸€ä¸ªæ»¡è¶³ ä¸xçš„å·® <= tå³å¯
            // æ³¨é‡Šç±»å‹è½¬æ¢é¿å…æº¢å‡º
            if (floor != null && (long) nums[i] - floor <= t) {
                return true;
            }
            Integer ceiling = window.ceiling(nums[i]);
            if (ceiling != null && (long) ceiling - nums[i] <= t) {
                return true;
            }
            // çª—å£æ‰©å¼ ï¼Œå½“å‰å…ƒç´ å…¥çª—å£
            window.add(nums[i]);

            // è‹¥ i è¶…è¿‡kï¼Œåˆ™ä»çª—å£å†…ç§»é™¤ nums[i-k]; å³å·¦å³è¾¹ç•ŒåŒæ—¶ç§»åŠ¨ï¼Œç»´æŠ¤çª—å£å¤§å°
            if (i >= k) {
                window.remove(nums[i - k]);
            }
        }
        // é»˜è®¤è¿”å› false
        return false;
    }


    /**
     * æ–¹æ³•å››ï¼šæ»‘åŠ¨çª—å£ + æ¡¶æ’åº
     * ä¸Šè¿°è§£æ³•æ— æ³•åšåˆ°çº¿æ€§çš„åŸå› æ˜¯ï¼šæˆ‘ä»¬éœ€è¦åœ¨å¤§å°ä¸º k çš„æ»‘åŠ¨çª—å£æ‰€åœ¨çš„ã€Œæœ‰åºé›†åˆã€ä¸­æ‰¾åˆ°ä¸ u æ¥è¿‘çš„æ•°ã€‚
     *
     * å’Œä¹‹å‰ä¸€æ ·ï¼Œçª—å£ä»ç„¶ç»´æŠ¤nums[i] å·¦è¾¹ k ä¸ªæ•°å­—ï¼Œè¿™æ ·ä¸‹æ ‡å°±æ˜¯æ»¡è¶³çº¦æŸçš„
     * å†è€ƒè™‘æ˜¯å¦å­˜åœ¨å…ƒç´ ï¼Ÿä¸xçš„å·®å€¼ä¸è¶…è¿‡t
     * å¯¹äºçª—å£å†…kä¸ªå…ƒç´ 
     * ä»¤æ¡¶çš„å¤§å°ä¸º size=t+1ï¼ˆé‚£ä¹ˆä¸€ä¸ªæ¡¶å†…çš„å…ƒç´ å·®ç»å¯¹ä¸ä¼šè¶…è¿‡tï¼Œé—´éš”ä¸€ä¸ªæ¡¶çš„ä¸¤ä¸ªæ¡¶å†…å…ƒç´ å·®å¿…ç„¶è¶…è¿‡tï¼‰ï¼Œ
     * å¯¹äºnums[i] = uï¼Œè®¡ç®—å…¶æ‰€åœ¨æ¡¶ç¼–å·ï¼š
     *      å¦‚æœè¯¥æ¡¶å†…å·²æœ‰å…ƒç´ ï¼Œè¯´æ˜çª—å£å†…å¿…ç„¶å­˜åœ¨ [uâˆ’t,u+t] èŒƒå›´çš„æ•°å­—ï¼Œè¿”å› true
     *      å¦‚æœè¯¥æ¡¶å†…ä¸å­˜åœ¨å…ƒç´ ï¼Œåˆ™æ£€æŸ¥ç›¸é‚»ä¸¤ä¸ªæ¡¶å†…æ˜¯å¦å­˜åœ¨å…ƒç´ ï¼Œå¦‚æœå­˜åœ¨ï¼Œåˆ¤æ–­æ˜¯å¦æ»¡è¶³ [uâˆ’t,u+t] ï¼Œå¦‚æœ‰ è¿”å› true
     *      æ”¾ç½®å½“å‰å…ƒç´ å…¥æ¡¶å†…ï¼Œè‹¥i>=kï¼Œåˆ™éœ€è¦ä»çª—å£å†…ç§»é™¤nums[i-k]ï¼Œå³åˆ é™¤nums[i-k]æ‰€åœ¨æ¡¶
     *
     * æ¡¶ä¸‹æ ‡è®¡ç®—æ–¹å¼ï¼š
     *     long getIdx(long u) {
     *         return u >= 0 ? u / size : ((u + 1) / size) - 1;
     *     }
     *
     * ã€æé—®ã€‘
     * ã€1ã€‘
     * ä¸ºä»€ä¹ˆ æ¡¶å¤§å° size éœ€è¦å¯¹ t è¿›è¡Œ +1 æ“ä½œï¼Ÿ
     * ç›®çš„æ˜¯ä¸ºäº†ç¡®ä¿å·®å€¼å°äºç­‰äº t çš„æ•°èƒ½å¤Ÿè½åˆ°ä¸€ä¸ªæ¡¶ä¸­ã€‚
     *
     * ä¸¾ä¸ª ğŸŒ°ï¼Œå‡è®¾ [0,1,2,3]ï¼Œt = 3ï¼Œæ˜¾ç„¶å››ä¸ªæ•°éƒ½åº”è¯¥è½åœ¨åŒä¸€ä¸ªæ¡¶ã€‚
     *
     * å¦‚æœä¸å¯¹ size è¿›è¡Œ t+1 æ“ä½œçš„è¯ï¼Œé‚£ä¹ˆ [0,1,2] å’Œ [3] ä¼šè¢«è½åˆ°ä¸åŒçš„æ¡¶ä¸­ï¼Œé‚£ä¹ˆä¸ºäº†è§£å†³è¿™ç§é”™è¯¯ï¼Œæˆ‘ä»¬éœ€è¦å¯¹ t è¿›è¡Œ +1 ä½œä¸º size ã€‚
     *
     * è¿™æ ·æˆ‘ä»¬çš„æ•°è½´å°±èƒ½è¢«åˆ†å‰²æˆï¼š
     *
     * 0 1 2 3 | 4 5 6 7 | 8 9 10 11 | 12 13 14 15 | â€¦
     * å¹¶ä¸”å¯ä»¥å‘ç°ï¼šåŒä¸€æ¡¶å†…å…ƒç´ å·®å€¼å¿…ç„¶<=tï¼›ç›¸é‚»æ¡¶é—´å…ƒç´ å·®å€¼å¯èƒ½<=tï¼›é—´éš”è¶…è¿‡1ä¸ªæ¡¶çš„ä¸¤ä¸ªæ¡¶å†…å…ƒç´ å·®å€¼å¿…ç„¶è¶…è¿‡t
     *
     * æ€»ç»“ä¸€ä¸‹ï¼Œæœ¬è´¨æ˜¯å› ä¸ºå·®å€¼ä¸º t ä¸¤ä¸ªæ•°åœ¨æ•°è½´ä¸Šç›¸éš”è·ç¦»ä¸º t + 1ï¼Œå®ƒä»¬éœ€è¦è¢«è½åˆ°åŒä¸€ä¸ªæ¡¶ä¸­ã€‚
     * ï¼ˆå…¶å®å°±æ˜¯1åˆ°5æœ‰5ä¸ªæ•°å­—ï¼Œè€Œ5-1å´ç­‰äº4ï¼Œæ•°å­—ä¸ªæ•°å¯¹åº”æ¡¶å¤§å°ï¼Œæ•°å­—å·®å€¼å¯¹åº”æ¡¶å†…å…ƒç´ å·®å€¼ï¼Œæ‰€æœ‰ä¼šæœ‰å·®1ï¼‰
     *
     * ã€2ã€‘
     * å½“æ˜ç¡®äº† size çš„å¤§å°ä¹‹åï¼Œå…³äºè®¡ç®—æ¡¶ä¸‹æ ‡ï¼Œå¯¹äºæ­£æ•°éƒ¨åˆ†æˆ‘ä»¬åˆ™æœ‰ idx = nums[i] / sizeã€‚
     *
     * å¦‚ä½•ç†è§£è´Ÿæ•°éƒ¨åˆ†çš„é€»è¾‘ï¼Ÿ((u + 1) / size) - 1;
     * ç”±äºæˆ‘ä»¬å¤„ç†æ­£æ•°çš„æ—¶å€™ï¼Œå¤„ç†äº†æ•°å€¼ 0ï¼Œå› æ­¤æˆ‘ä»¬è´Ÿæ•°éƒ¨åˆ†æ˜¯ä» -1 å¼€å§‹çš„ã€‚
     *
     * è¿˜æ˜¯æˆ‘ä»¬ä¸Šè¿° ğŸŒ°ï¼Œæ­¤æ—¶æˆ‘ä»¬æœ‰ t = 3 å’Œ size = t + 1 = 4ã€‚
     *
     * è€ƒè™‘ [-4,-3,-2,-1] çš„æƒ…å†µï¼Œå®ƒä»¬åº”è¯¥è½åœ¨ä¸€ä¸ªæ¡¶ä¸­ã€‚
     *
     * å¦‚æœç›´æ¥å¤ç”¨ idx = nums[i] / size çš„è¯ï¼Œ[-4] å’Œ [-3,-2,-1] ä¼šè¢«åˆ†åˆ°ä¸åŒçš„æ¡¶ä¸­ã€‚
     *
     * æ ¹æœ¬åŸå› æ˜¯æˆ‘ä»¬å¤„ç†æ•´æ•°çš„æ—¶å€™ï¼Œå·²ç»åˆ†æ‰äº†æ•°å€¼ 0ã€‚
     *
     * è¿™æ—¶å€™æˆ‘ä»¬éœ€è¦å…ˆå¯¹ nums[i] è¿›è¡Œ +1 æ“ä½œï¼ˆå³å°†è´Ÿæ•°éƒ¨åˆ†åœ¨æ•°è½´ä¸Šè¿›è¡Œæ•´ä½“å³ç§»ï¼‰ï¼Œå³å¾—åˆ° (nums[i] + 1) / sizeã€‚
     *
     * è¿™æ ·ä¸€æ¥è´Ÿæ•°éƒ¨åˆ†ä¸æ­£æ•°éƒ¨åˆ†ä¸€æ ·ï¼Œå¯ä»¥è¢«æ­£å¸¸åˆ†å‰²äº†ã€‚
     *
     * ä½†ç”±äº 0 å·æ¡¶å·²ç»è¢«ä½¿ç”¨äº†ï¼Œæˆ‘ä»¬è¿˜éœ€è¦åœ¨æ­¤åŸºç¡€ä¸Šè¿›è¡Œ -1ï¼Œç›¸å½“äºå°†è´Ÿæ•°éƒ¨åˆ†çš„æ¡¶ä¸‹æ ‡ï¼ˆidxï¼‰å¾€å·¦ç§»ï¼Œå³å¾—åˆ° ((nums[i] + 1) / size) - 1ã€‚
     *
     * ä½œè€…ï¼šAC_OIer
     * é“¾æ¥ï¼šhttps://leetcode.cn/problems/contains-duplicate-iii/solution/gong-shui-san-xie-yi-ti-shuang-jie-hua-d-dlnv/
     * æ¥æºï¼šåŠ›æ‰£ï¼ˆLeetCodeï¼‰
     * è‘—ä½œæƒå½’ä½œè€…æ‰€æœ‰ã€‚å•†ä¸šè½¬è½½è¯·è”ç³»ä½œè€…è·å¾—æˆæƒï¼Œéå•†ä¸šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚
     */
    long size;
    public boolean containsNearbyAlmostDuplicate4(int[] nums, int k, int t) {
        int n = nums.length;
        Map<Long, Long> map = new HashMap<>();
        // æ¡¶å¤§å°
        size = t + 1L;
        for (int i = 0; i < n; i++) {
            long u = nums[i] * 1L;
            // æ‰¾åˆ°å…¶æ‰€åœ¨æ¡¶
            long idx = getIdx(u);
            // æ¡¶å·²å­˜åœ¨ï¼Œæ¡¶å†…å·²ç»å…ƒç´ ï¼Œè¯´æ˜å‰é¢å¿…ç„¶æœ‰ [u - t, u + t] èŒƒå›´çš„æ•°å­—
            if (map.containsKey(idx)) return true;
            // æ£€æŸ¥ç›¸é‚»çš„æ¡¶æ˜¯å¦å­˜åœ¨ï¼Œè‹¥å­˜åœ¨ï¼Œåˆ¤æ–­æ¡¶å†…æ•°å­—ä¸è‡ªèº«çš„å·®å€¼æ˜¯å¦ <= t
            // é—´éš”è¶…è¿‡1çš„æ¡¶å†…å…ƒç´ å·®å¿…ç„¶è¶…è¿‡tï¼Œä¸ç”¨è€ƒè™‘
            long l = idx - 1, r = idx + 1;
            if (map.containsKey(l) && u - map.get(l) <= t) return true;
            if (map.containsKey(r) && map.get(r) - u <= t) return true;
            // å»ºç«‹ç›®æ ‡æ¡¶ï¼Œæ”¾å…¥å½“å‰å…ƒç´ 
            map.put(idx, u);
            // ç§»é™¤ä¸‹æ ‡èŒƒå›´ä¸åœ¨ [max(0, i - k), i) å†…çš„æ¡¶
            // ç»´æŠ¤çª—å£å¤§å°k
            if (i >= k) map.remove(getIdx(nums[i - k] * 1L));
        }
        return false;
    }
    // è®¡ç®—å…ƒç´ æ‰€åœ¨æ¡¶ä¸‹æ ‡
    long getIdx(long u) {
        return u >= 0 ? u / size : ((u + 1) / size) - 1;
    }


    public static void main(String[] args) {
        _057_BothValueAndIndexDifferenceWithGivenRange obj = new _057_BothValueAndIndexDifferenceWithGivenRange();
        System.out.println(obj.containsNearbyAlmostDuplicate(new int[]{0, 10, 22, 15, 0, 5, 22, 12, 1, 5}, 3, 3));
        System.out.println(obj.containsNearbyAlmostDuplicate2(new int[]{1, 5, 9, 1, 5, 9}, 2, 3));
    }
}
